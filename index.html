<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>for Khusnul</title>
<style>
body {
  margin: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  background: linear-gradient(180deg, #fff0f6 0%, #ffe6f2 100%);
  font-family: "Brush Script MT", cursive;
}

/* Canvas dan tombol next */
.canvas-wrap {
  position: relative;
  box-shadow: 0 8px 30px rgba(0,0,0,0.15);
  border-radius: 12px;
  overflow: hidden;
  display: none;
}

canvas {
  display: block;
  background: transparent;
  width: 799.5px;
  height: 449.5px;
}

button {
  background-color: #ff4da6;
  color: white;
  border: none;
  border-radius: 12px;
  padding: 12px 24px;
  font-size: 22px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

button:hover {
  background-color: #ff66b2;
  transform: scale(1.05);
}

#nextBtn {
  position: absolute;
  bottom: 20px;
  right: 20px;
  display: none;
}

/* Layout kedua */
#nextLayout {
  width: 100%;
  height: 100vh;
  background-color: #ffffff;
  display: none;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  font-family: Arial, sans-serif;
  animation: fadeIn 1s ease;
  padding: 20px;
  box-sizing: border-box;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* Kotak komentar / tempat teks manual */
.comment-box {
  width: 500px;
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.1);
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: center;
}

.comment-box h1 {
  text-align: center;
  color: #ff4da6;
  font-family: "Brush Script MT", cursive;
  font-size: 42px;
  margin: 0;
}

.comment-box p {
  text-align: center;
  font-size: 18px;
  color: #4d244d;
  margin: 0;
}

</style>
</head>
<body>

<!-- Tombol awal -->
<button id="showBtn">Klik ini</button>

<!-- Canvas Birthday -->
<div class="canvas-wrap">
  <canvas id="birthdayCanvas" width="1599" height="899"></canvas>
  <button id="nextBtn">lanjut ➜</button>
</div>

<!-- Layout kedua (teks manual bisa diedit langsung di sini) -->
<div id="nextLayout">
  <div class="comment-box">
    <h1>Tentang Kita</h1>
<p style="font-family: Arial, sans-serif; text-align: left;">
Sejak aku mengenalmu, aku merasa kamu adalah orang yang sangat baik. Menjalani hubungan HTS selama satu tahun itu memang nggak mudah, Khusnul, tapi aku bangga kita bisa melewatinya.<br><br>
Aku berharap, di kisah cintamu yang berikutnya, kamu menemukan seseorang yang benar-benar tepat — yang bisa membimbingmu, mendukungmu, dan membuatmu semakin bahagia.<br><br>
Tetap semangat juga ya, untuk sisa-sisa agit ini.<br><br>
Kalau dipikir-pikir, kisah HTS kita itu seperti lagu “Dan” dari Sheila On 7. Lagu itu bercerita tentang cinta yang tulus dan penuh pengorbanan, di mana seseorang rela melepaskan orang yang ia sayangi demi kebahagiaan orang tersebut, meski hatinya sendiri tersakiti. Rasanya begitu pas dengan perjalanan kita.<br><br>
Hehe, maaf ya kalau kesannya agak dramatis banget… antara kamu senang karena aku ucapin ini, tapi sekaligus sedih karena baca teksnya. Sekali lagi aku minta maaf ya.
</p>

  </div>
</div>

<script>
const button = document.getElementById("showBtn");
const canvasWrap = document.querySelector(".canvas-wrap");
const canvas = document.getElementById("birthdayCanvas");
const ctx = canvas.getContext("2d");
const nextBtn = document.getElementById("nextBtn");
const nextLayout = document.getElementById("nextLayout");

const ratio = window.devicePixelRatio || 1;
const logicalW = 1599;
const logicalH = 899;
canvas.width = Math.round(logicalW * ratio);
canvas.height = Math.round(logicalH * ratio);
ctx.setTransform(ratio,0,0,ratio,0,0);

let stopAnimation = false;

// --- Confetti ---
const confettiCount = 200;
const confetti = [];
function initConfetti() {
  confetti.length = 0;
  for (let i=0; i<confettiCount; i++){
    confetti.push({
      x: Math.random()*logicalW,
      y: Math.random()*logicalH,
      r: 5+Math.random()*12,
      speed: 2+Math.random()*4,
      color: `hsl(${Math.random()*360} 90% 60%)`,
      tilt: Math.random()*15 -7.5
    });
  }
}
function drawConfetti(){
  confetti.forEach(c=>{
    ctx.beginPath();
    ctx.fillStyle = c.color;
    ctx.moveTo(c.x, c.y);
    ctx.lineTo(c.x+c.tilt, c.y+c.r);
    ctx.lineTo(c.x-c.tilt, c.y+c.r);
    ctx.closePath();
    ctx.fill();
  });
}
function updateConfetti(){
  confetti.forEach(c=>{
    c.y += c.speed;
    c.x += Math.sin(c.y*0.01)*2;
    if(c.y > logicalH){ c.y=-c.r; c.x=Math.random()*logicalW; }
  });
}

// --- Show Birthday Card ---
function showBirthdayCard(){
  const bg = new Image();
  bg.src = "khusnul.jpg";
  bg.onload = ()=>{
    initConfetti();
    nextBtn.style.display="block";

    function animate(){
      if (stopAnimation) return;
      ctx.drawImage(bg,0,0,logicalW,logicalH);
      updateConfetti();
      drawConfetti();

      const title="Happy Birthday!";
      ctx.textAlign="center";
      ctx.textBaseline="top";
      ctx.font=`120px "Brush Script MT", cursive`;
      ctx.lineWidth=8;
      ctx.shadowColor="rgba(255,182,193,0.5)";
      ctx.shadowBlur=25;
      ctx.strokeStyle="rgba(255,255,255,0.7)";
      ctx.strokeText(title,logicalW/2, 20);
      ctx.fillStyle="#ff4da6";
      ctx.fillText(title,logicalW/2, 20);

      requestAnimationFrame(animate);
    }
    animate();
  };
}

// --- Sound ---
const so7Sound = new Audio("laguSo7.mp3");
so7Sound.loop = true;

// --- Event Tombol ---
button.addEventListener("click",()=>{
  button.style.display="none";
  canvasWrap.style.display="block";
  so7Sound.play();
  showBirthdayCard();
});

nextBtn.addEventListener("click", ()=>{
  canvasWrap.style.display="none";
  nextLayout.style.display="flex";
});
</script>
</body>
</html>
